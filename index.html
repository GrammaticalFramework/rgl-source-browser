<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous" />
    <link rel="stylesheet" href="app.css">
    <title>RGL Browser</title>
    <link rel="icon" href="data:,">
  </head>
  <body class="h-100">
    <div class="container-fluid">

      <div id="app" class="row" style="height: 100vh; overflow-y: hidden;">

        <!-- Left pane -->
        <div class="col-4 col-md-3 col-lg-2 bg-light py-2 h-100">

          <div class="d-flex align-items-center mb-3">
            <img src="http://www.grammaticalframework.org/doc/Logos/gf1.svg" class="mr-2" style="height:2.5rem;">
            <div class="navbar-brand">
              RGL Browser
              <span class="badge badge-pill badge-secondary">v3</span>
            </div>
          </div>

          <!-- <h3 class="h6">History</h3> -->

          <div class="h-100 overflow-y-scroll">
            <div v-for="(item,ix) in history_reversed" :key="ix">
              {{ item.language }} / {{ item.module }}
              <span v-if="ix === 0">&rarr;</span>
            </div>
          </div>

          <!-- <form class="form-inline">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="fas fa-search"></i>
                </span>
              </div>
              <input type="text" class="form-control" placeholder="Module search" aria-label="Module search" id="input-module-search">
            </div>
          </form>
          <button class="btn btn-secondary w-100 my-1" id="btn-api">
            <i class="fab fa-readme mr-1"></i>
            Show API
          </button>
          <nav class="list-group" id="menu"></nav> -->
        </div>

        <!-- Right pane -->
        <div class="col-8 col-md-9 col-lg-10 py-3 h-100">

          <!-- top bar -->
          <div class="d-flex">
            <div class="form-inline mb-2 flex-grow-1">
              <div class="input-group flex-grow-1 mr-2">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fas fa-search"></i>
                  </span>
                </div>
                <input type="text" class="form-control" v-model="search_term" placeholder="Search for language, module or identifier">
              </div>
              <!-- <button type="button" class="btn btn-secondary">Clear</button> -->
              <div class="ml-2" v-show="show.loading">
                <i class="fas fa-circle-notch fa-spin text-danger" style="font-size:1.5em"></i>
              </div>
            </div>

            <div class="" v-if="rgl_commit">
              <a class="nav-link border-0 text-muted" v-bind:href="'https://github.com/GrammaticalFramework/gf-rgl/tree/' + rgl_commit">
                RGL
                <i class="mx-1 fas fa-code-branch"></i>
                {{ rgl_commit }}
              </a>
            </div>

            <div class="text-muted small py-0">
              John J. Camilleri, 2020<br>
              <a href="https://github.com/GrammaticalFramework/rgl-source-browser">
                View on GitHub
                <i class="fab fa-github"></i>
              </a>
            </div>

          </div>

          <div class="h-100">

            <!-- Results -->
            <div class="row border rounded m-1 py-2" v-show="show.results">
              <div class="col-4">
                <h4 class="h6">Modules</h4>
                <a href="" v-for="(r,ix) in module_results" :key="ix" class="d-block" @click.prevent="selectModule(r.language, r.module)">{{ r.module }}</a>
              </div>
              <div class="col-4">
                <h4 class="h6">Scope</h4>
                <a href="" v-for="(r,ix) in scope_results" :key="ix" class="d-block">{{ r }}</a>
              </div>
              <div class="col-4">
                global results
              </div>
            </div>

            <!-- Scope & Code -->
            <div class="row h-100">
              <div class="col-5 h-100 overflow-y-scroll" v-if="current.scope">
                <table class="table table-sm">
                  <thead>
                    <tr>
                      <th scope="col">Identifier</th>
                      <th scope="col">Judgement Type</th>
                      <th scope="col">Module</th>
                      <th scope="col">Function Type</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="(item,ix) in current.scope" :key="ix">
                      <td><code>{{ item.ident }}</code></td>
                      <td>{{ item.jtype }}</td>
                      <td><a href="" @click.prevent="selectModule()">{{ item.modloc }}</a></td>
                      <td><code>{{ item.ftype }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="col-7 bg-light py-3 h-100 overflow-y-scroll" v-if="current.code">
                <pre><code class="haskell" id="code">{{ current.code }}</code></pre>
              </div>
            </div>

            <!-- <div class="tab-pane show active py-2" id="results" role="tabpanel" aria-labelledby="tab-results">
              <div class="row">
                <div class="col-4">
                  <table class="table" id="module-search-results">
                    <thead>
                      <tr>
                        <th scope="col">Module</th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
                </div>
                <div class="col-8">
                  <table class="table" id="defn-search-results">
                    <thead>
                      <tr>
                        <th scope="col">Symbol</th>
                        <th scope="col">Judgement Type</th>
                        <th scope="col">Module</th>
                        <th scope="col">Function Type</th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="tab-pane show py-2" id="scope" role="tabpanel" aria-labelledby="tab-scope">
              <div class="form-inline mb-2">
                <div class="input-group mr-2 w-25">
                  <div class="input-group-prepend">
                    <span class="input-group-text">
                      <i class="fas fa-filter"></i>
                    </span>
                  </div>
                  <input type="text" class="form-control" placeholder="Filter" aria-label="Module" id="input-filter">
                </div>
                <button type="button" class="btn btn-secondary" id="btn-clear">Clear</button>
                <div class="form-check mx-2">
                  <input class="form-check-input" type="checkbox" name="case-sensitive" id="input-case-sensitive">
                  <label class="form-check-label" for="input-case-sensitive">
                    Case sensitive
                  </label>
                </div>
                <div class="form-check mx-2">
                  <input class="form-check-input" type="radio" name="show-what" id="input-show-all" checked>
                  <label class="form-check-label" for="input-show-all">
                    Show all
                  </label>
                </div>
                <div class="form-check mx-2">
                  <input class="form-check-input" type="radio" name="show-what" id="input-show-local">
                  <label class="form-check-label" for="input-show-local">
                    Local only
                  </label>
                </div>
                <div class="mx-2 text-muted">
                  <span id="count">&hellip;</span> items
                </div>
              </div>
            </div>

          </div>--> <!-- main pane -->

        </div>
      </div><!-- app -->

    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js" integrity="sha256-T/f7Sju1ZfNNfBh7skWn0idlCBcI3RwdLSS4/I7NQKQ=" crossorigin="anonymous"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js" integrity="sha256-WxYLWg8NFyyEq+Zs9pVsDQmlFpJt+733DecPx5+hrQw=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.5.0/highlightjs-line-numbers.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
