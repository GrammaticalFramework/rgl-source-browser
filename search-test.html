<!doctype html>
<html>
  <head>
    <link rel="icon" href="data:,">
  </head>
  <body>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script>
      var d
      $(document).ready(function () {
        $.ajax({
          url: 'data/search.json',
          dataType: 'json',
          type: 'GET',
          success: function (data) {
            d = data
          }
        })
      })

      // Search in a sorted list
      // Returns item on exact match, otherwise false
      function find (data, term, min, max) {
        if (min === undefined) min = 0
        if (max === undefined) max = data.length
        var mid = Math.round((max - min) / 2) + min
        if (mid > min && mid < max) {
          var elem = data[mid]
          if (term === elem.symbol) return elem
          if (term < elem.symbol) return find(data, term, min, mid)
          if (term > elem.symbol) return find(data, term, mid, max)
        } else {
          for (var m in [min, mid, max]) {
            if (term === d[m].symbol) return d[m]
          }
          return false
        }
      }

      // Search for every item in index, failing on first fail
      function test () {
        for (var ix in d) {
          var found = find(d, d[ix].symbol)
          if (!found) {
            console.log('Didn\'t find ', d[ix].symbol)
            break
          }
        }
      }
    </script>
  </body>
</html>
